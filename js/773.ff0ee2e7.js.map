{"version":3,"file":"js/773.ff0ee2e7.js","mappings":"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","sources":["webpack://week6/./node_modules/mitt/dist/mitt.mjs","webpack://week6/./src/libs/emitter.js","webpack://week6/./src/views/CartView.vue","webpack://week6/./src/views/CartView.vue?73a2"],"sourcesContent":["export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\n// 將mitt匯出讓其他地方可以使用\nconst emitter = mitt()\nexport default emitter\n","<template>\n  <div class=\"container\">\n    <h2>購物車</h2>\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"product in products\" :key=\"product.id\">\n          <td style=\"width: 200px\">\n            <div\n              :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n              style=\"\n                height: 100px;\n                background-size: cover;\n                background-position: center;\n              \"\n            ></div>\n          </td>\n          <td>\n            {{ product.title }}\n          </td>\n          <td>\n            <div class=\"h5\" v-if=\"product.origin_price === product.price\">\n              {{ product.price }} 元\n            </div>\n            <div v-else>\n              <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n              <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n            </div>\n          </td>\n          <td>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                @click=\"openProductModal(product.id)\"\n                :disabled=\"isLoadingItem === product.id\"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-show=\"isLoadingItem === product.id\"\n                ></i>\n                查看更多\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n                @click=\"addToCart(product.id)\"\n                :disabled=\"isLoadingItem === product.id\"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-show=\"isLoadingItem === product.id\"\n                ></i>\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <!-- 購物車列表 -->\n    <div class=\"text-end\">\n      <button\n        class=\"btn btn-outline-danger\"\n        type=\"button\"\n        @click=\"deleteCartAll\"\n      >\n        清空購物車\n      </button>\n    </div>\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th></th>\n          <th>品名</th>\n          <th style=\"width: 150px\">數量/單位</th>\n          <th>單價</th>\n        </tr>\n      </thead>\n      <tbody>\n        <template v-if=\"cartData.carts\">\n          <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger btn-sm\"\n                @click=\"deleteCartItem(item.id)\"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-show=\"isLoadingItem === item.id\"\n                ></i>\n                x\n              </button>\n            </td>\n            <td>\n              {{ item.product.title }}\n              <div class=\"text-success\">已套用優惠券</div>\n            </td>\n            <td>\n              <div class=\"input-group input-group-sm\">\n                <div class=\"input-group mb-3\">\n                  <select\n                    id=\"\"\n                    class=\"form-select\"\n                    v-model=\"item.qty\"\n                    @change=\"updateCartItem(item)\"\n                    :disabled=\"isLoadingItem === item.id\"\n                  >\n                    <option\n                      :value=\"num\"\n                      v-for=\"num in 10\"\n                      :key=\"`${num}_${item.id}`\"\n                    >\n                      {{ num }}\n                    </option>\n                  </select>\n                  <span class=\"input-group-text\" id=\"basic-addon2\">{{\n                    item.product.unit\n                  }}</span>\n                </div>\n              </div>\n            </td>\n            <td class=\"text-end\">\n              <small class=\"text-success\">折扣價：</small>\n              {{ item.total }}\n            </td>\n          </tr>\n        </template>\n      </tbody>\n      <tfoot>\n        <tr>\n          <td colspan=\"3\" class=\"text-end\">總計</td>\n          <td class=\"text-end\">{{ cartData.total }}</td>\n        </tr>\n        <tr>\n          <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n          <td class=\"text-end text-success\">{{ cartData.final_total }}</td>\n        </tr>\n      </tfoot>\n    </table>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/libs/emitter'\n\nexport default {\n  data () {\n    return {\n      cartData: {},\n      products: [],\n      isLoadingItem: ''\n    }\n  },\n  methods: {\n    getProducts () {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          this.products = res.data.products\n        })\n        .catch((error) => {\n          alert(error.data.message)\n        })\n    },\n    addToCart (id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.isLoadingItem = id\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data }\n        )\n        .then((res) => {\n          alert(res.data.message)\n          this.getCart()\n          // emitter.emit(\"get-Cart\");\n        })\n        .catch((error) => {\n          alert(error.data.message)\n        })\n      this.isLoadingItem = ''\n    },\n    getCart () {\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cartData = res.data.data\n          emitter.emit('get-Cart')\n        })\n        .catch((error) => {\n          alert(error.data.message)\n        })\n    },\n    deleteCartItem (id) {\n      this.isLoadingItem = id\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\n        )\n        .then(() => {\n          this.getCart()\n        })\n        .catch((error) => {\n          alert(error.data.message)\n        })\n      this.isLoadingItem = ''\n    },\n    deleteCartAll () {\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`\n        )\n        .then(() => {\n          this.getCart()\n        })\n        .catch((error) => {\n          alert(error.data.message)\n        })\n    },\n    updateCartItem (item) {\n      const data = {\n        product_id: item.id,\n        qty: item.qty\n      }\n      this.isLoadingItem = item.id\n      this.$http\n        .put(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`,\n          { data }\n        )\n        .then(() => {\n          this.getCart()\n        })\n        .catch((error) => {\n          alert(error.data.message)\n        })\n      this.isLoadingItem = ''\n      console.log(this.cartData)\n    }\n  },\n  mounted () {\n    this.getProducts()\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=01495fc7\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\hexschool\\\\vue-cli\\\\week6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["n","all","Map","on","t","e","i","get","push","set","off","splice","indexOf","emit","slice","map","emitter","mitt","class","_createElementVNode","style","id","colspan","_createElementBlock","_hoisted_2","_hoisted_4","_Fragment","_renderList","$data","product","key","backgroundImage","imageUrl","_toDisplayString","title","origin_price","price","_hoisted_7","type","onClick","_ctx","disabled","$options","_hoisted_19","carts","item","_hoisted_23","qty","$event","onChange","num","value","_hoisted_27","unit","_hoisted_30","total","_hoisted_31","_hoisted_33","final_total","data","cartData","products","isLoadingItem","methods","getProducts","this","$http","then","res","catch","error","alert","message","addToCart","product_id","post","getCart","deleteCartItem","delete","deleteCartAll","updateCartItem","put","console","log","mounted","__exports__","render"],"sourceRoot":""}